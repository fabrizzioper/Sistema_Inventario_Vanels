<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Buscador de Productos</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/agregar_productos.css') }}"
    />
  </head>
  <body>
    <div class="main-container">
      <!-- Botón de atrás -->
      <a href="/" class="back-button">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z" />
        </svg>
        Home
      </a>

      <h1 class="page-title text-center">Buscador de Productos</h1>

      <!-- Search Section -->
      <div class="search-container">
        <div class="card-body p-4">
          <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
              <div class="input-group">
                <input
                  type="text"
                  id="codigoProducto"
                  class="form-control form-control-lg"
                  placeholder="Ingrese código del producto"
                />
                <button
                  class="btn btn-custom btn-lg"
                  onclick="buscarProducto()"
                >
                  <i class="fas fa-search me-2"></i>Buscar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Loading Spinner -->
      <div id="loading" class="text-center py-4" style="display: none">
        <div class="spinner-border loading-spinner" role="status">
          <span class="visually-hidden">Buscando...</span>
        </div>
        <p class="mt-3" style="color: #718096">Buscando producto...</p>
      </div>

      <!-- Results Section -->
      <div id="resultContainer" class="card" style="display: none">
        <div class="card-body p-4">
          <h2 class="mb-4" style="color: #2d3748; font-weight: 600">
            Resultados
          </h2>
          <div class="table-responsive">
            <table class="table w-100">
              <thead>
                <tr>
                  <th>Imagen</th>
                  <th>Nombre</th>
                  <th>Marca</th>
                </tr>
              </thead>
              <tbody id="resultadoTabla"></tbody>
            </table>
          </div>
          <div
            class="d-flex flex-column flex-md-row justify-content-center gap-3 mt-4"
          >
            <button class="btn btn-custom" onclick="ingresarManual()">
              <i class="fas fa-edit me-2"></i>Ingresar Manual
            </button>
            <button class="btn btn-custom" onclick="registrarTallas()">
              <i class="fas fa-ruler me-2"></i>Registrar Tallas
            </button>
          </div>
        </div>
      </div>

      <!-- Tallas Form Section -->
      <div id="tallasContainer" class="card" style="display: none">
        <div class="card-body p-4">
          <h2 class="mb-4" style="color: #2d3748; font-weight: 600">
            Registrar Tallas
          </h2>

          <!-- Product Info Section -->

          <div class="row g-4 mb-4">
            <div class="col-md-12">
              <div
                id="imageInputContainer"
                class="form-floating"
                style="display: none"
              >
                <div class="input-group">
                  <input
                    type="file"
                    class="form-control"
                    id="imagenProducto"
                    accept="image/*"
                    capture="environment"
                  />
                  <label class="input-group-text" for="imagenProducto">
                    <i class="fas fa-camera"></i>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div class="row g-4 mb-4">
            <div class="col-md-3">
              <div class="form-floating">
                <input type="text" id="codigoManual" class="form-control" />
                <label>Código del Producto</label>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-floating">
                <select id="categoriaSelect" class="form-select"></select>
                <label>Categoría</label>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-floating">
                <input type="text" id="modeloInput" class="form-control" />
                <label>Modelo</label>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-floating">
                <select id="marcaSelect" class="form-select"></select>
                <label>Marca</label>
              </div>
            </div>
          </div>

          <!-- Prices Section -->
          <div class="row g-4 mb-4">
            <div class="col-md-4">
              <div class="form-floating">
                <input
                  type="number"
                  id="precioRetail"
                  class="form-control"
                  step="0.01"
                />
                <label>Precio Retail</label>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-floating">
                <input
                  type="number"
                  id="precioRegular"
                  class="form-control"
                  step="0.01"
                />
                <label>Precio Regular</label>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-floating">
                <input
                  type="number"
                  id="precioOnline"
                  class="form-control"
                  step="0.01"
                />
                <label>Precio Online</label>
              </div>
            </div>
          </div>

          <div class="row g-4 mb-4">
            <div class="col-md-6">
              <div class="form-floating">
                <input
                  type="number"
                  id="precioCompra"
                  class="form-control"
                  step="0.01"
                />
                <label>Precio de Compra</label>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-floating">
                <input
                  type="number"
                  id="precioPromocion"
                  class="form-control"
                  step="0.01"
                />
                <label>Precio Promoción (opcional)</label>
              </div>
            </div>
          </div>

          <!-- Promotion Dates -->
          <div class="row g-4 mb-4">
            <div class="col-md-6">
              <div class="form-floating">
                <input type="date" id="fechaInicioPromo" class="form-control" />
                <label>Fecha Inicio Promoción</label>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-floating">
                <input type="date" id="fechaFinPromo" class="form-control" />
                <label>Fecha Fin Promoción</label>
              </div>
            </div>
          </div>

          <!-- Sizes Section -->

          <div
            id="tallasCalzadoContainer"
            class="row g-4 mb-4 mt-4"
            style="display: none"
          >
            <div class="col-md-12 mb-4 mt-4">
              <div class="form-floating mb-4">
                <select id="tallasSelect" class="form-select">
                  <option value="">Seleccione una clasificación</option>
                </select>
                <label>Clasificación de Tallas</label>
              </div>

              <div class="table-responsive">
                <table class="table" role="grid">
                  <thead>
                    <tr>
                      <th scope="col">Talla</th>
                      <th scope="col" style="width: 150px">Cantidad</th>
                    </tr>
                  </thead>
                  <tbody id="tallasTbody"></tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div
            class="d-flex flex-column flex-md-row justify-content-center gap-3 mt-4"
          >
            <button class="btn btn-custom" onclick="guardarTallas()">
              <i class="fas fa-save me-2"></i>Guardar
            </button>
            <button
              class="btn btn-custom"
              style="background: #e74c3c"
              onclick="cancelarTallas()"
            >
              <i class="fas fa-times me-2"></i>Cancelar
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/agregar_productos.js') }}"></script>
  </body>
</html>
